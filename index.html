<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€‹äººåŒ–ç‡Ÿé¤Šè¨ºæ–·æ›¸</title>
    <style>
        /* --- è¦–è¦ºé¢¨æ ¼è¨­å®š --- */
        :root {
            --primary-dark: #1F4E79; /* æ·±è— */
            --primary-light: #EBF5FB; /* æ¥µæ·ºè—èƒŒæ™¯ */
            --accent-green: #2ECC71; /* é®®ç¶  */
            --accent-soft-green: #D5F5E3; /* æ·ºç¶ å€å¡Š */
            --warning-red: #E74C3C;   /* è­¦ç¤ºç´… */
            --mom-pink: #FADBD8;      /* åª½å’ªç²‰ */
            --gold: #D4AC0D;          /* è† åŸè›‹ç™½é‡‘ */
            --gold-bg: #FCF3CF;       /* è† åŸè›‹ç™½æ·ºåº• */
            --text-dark: #2C3E50;
            --white: #FFFFFF;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Microsoft JhengHei", "Segoe UI", Roboto, sans-serif;
            background-color: #F4F6F7;
            color: var(--text-dark);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #fff 0%, var(--primary-light) 100%);
            padding: 40px 25px;
            text-align: center;
            border-bottom: 4px solid var(--accent-green);
        }

        h1 { color: var(--primary-dark); margin: 0; font-size: 1.8rem; letter-spacing: 1px; }
        p.subtitle { color: #5D6D7E; margin-top: 10px; font-size: 0.95rem; }

        /* æ¸¬é©—å€å¡Š */
        .content-box { padding: 30px; }
        .question-block { margin-bottom: 30px; }
        
        label.q-title {
            display: block;
            font-weight: bold;
            color: var(--primary-dark);
            margin-bottom: 15px;
            font-size: 1.1rem;
            border-left: 5px solid var(--accent-green);
            padding-left: 12px;
        }

        /* é¸é …æŒ‰éˆ•è¨­å®š */
        .option-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }
        
        .option-btn { position: relative; cursor: pointer; }
        .option-btn input { display: none; }
        .option-btn span {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 15px 10px;
            background: #FAFAFA;
            border: 1px solid #E5E7E9;
            border-radius: 12px;
            transition: all 0.2s;
            font-size: 0.95rem;
            text-align: center;
            height: 100%;
            box-sizing: border-box;
            line-height: 1.4;
        }

        .option-btn input:checked + span {
            background: var(--primary-dark);
            color: white;
            border-color: var(--primary-dark);
            box-shadow: 0 4px 12px rgba(31, 78, 121, 0.25);
            font-weight: bold;
            transform: translateY(-2px);
        }

        /* ç‰¹æ®Šé¸é …é¡è‰² */
        .special-option span { border: 1px dashed var(--primary-dark); background: #fdfdfd; }

        select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #BDC3C7; font-size: 1rem; background: white; }

        .btn-submit {
            width: 100%; padding: 16px;
            background-color: var(--accent-green);
            color: white;
            border: none; border-radius: 12px;
            font-size: 1.2rem; font-weight: bold;
            cursor: pointer; margin-top: 30px;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
            transition: transform 0.1s;
        }
        .btn-submit:active { transform: scale(0.98); }

        /* --- çµæœé æ¨£å¼ --- */
        #result-page { display: none; padding: 0; }
        
        .result-header { padding: 30px 30px 10px 30px; background: var(--white); }

        /* è­¦ç¤ºå¡ç‰‡ */
        .alert-box {
            margin: 0 30px 20px 30px;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.95rem;
            display: flex;
            align-items: flex-start;
        }
        .alert-box.mom { background-color: var(--mom-pink); color: #922B21; border: 1px solid #E6B0AA; }
        .alert-box.normal { background-color: #FEF9E7; color: #7D6608; border: 1px solid #F9E79F; }

        /* å»ºè­°åˆ—è¡¨å¡ç‰‡ */
        .schedule-card {
            margin: 20px 30px;
            background: white;
            border-radius: 15px;
            border: 1px solid #EAECEE;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03);
            overflow: hidden;
        }

        .time-header {
            background: var(--primary-dark);
            color: white;
            padding: 10px 20px;
            font-weight: bold;
            font-size: 1.1rem;
            display: flex; justify-content: space-between; align-items: center;
        }

        .synergy-box {
            background: var(--accent-soft-green);
            padding: 15px 20px;
            font-size: 0.9rem;
            color: #145A32;
            border-bottom: 1px solid #EAECEE;
        }

        .item-list { padding: 15px 20px; }

        .supplement-item {
            display: flex; margin-bottom: 10px; padding-bottom: 10px;
            border-bottom: 1px dashed #eee; align-items: flex-start;
        }
        .supplement-item:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }

        .supp-name { font-weight: bold; color: var(--primary-dark); min-width: 90px; }
        .supp-desc { font-size: 0.9rem; color: #555; flex: 1; }

        /* ç¶­è£œç›Šå°ˆå€ */
        .brand-section {
            background-color: #FDFEFE;
            padding: 30px;
            border-top: 4px solid var(--primary-dark);
        }
        .wb-card {
            background: #F4F6F7;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent-green);
            position: relative;
        }
        
        /* è† åŸè›‹ç™½å°ˆå±¬å¡ç‰‡ */
        .wb-card.future-product {
            background: var(--gold-bg);
            border-left: 4px solid var(--gold);
        }
        .badge-future {
            position: absolute;
            top: 10px; right: 10px;
            background: var(--gold);
            color: white;
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 20px;
            font-weight: bold;
        }

        /* è³¼è²·å€å¡Š */
        .buy-container {
            margin: 30px;
            text-align: center;
        }
        .buy-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
        }
        .buy-date { color: var(--primary-dark); font-weight: bold; display: block; margin-bottom: 5px; }
        .ship-date { color: #E67E22; font-weight: bold; font-size: 0.95rem; }

        .btn-buy {
            display: block; width: 100%;
            background: var(--primary-dark);
            color: white; padding: 18px;
            border-radius: 12px;
            text-decoration: none; font-weight: bold; font-size: 1.1rem;
            box-shadow: 0 5px 20px rgba(31, 78, 121, 0.3);
            transition: transform 0.1s;
        }
        .btn-buy:active { transform: scale(0.98); }

        .btn-reset {
            display: block; width: 100%; text-align: center;
            padding: 20px; color: #999; background: none; border: none;
            cursor: pointer; text-decoration: underline;
        }

    </style>
</head>
<body>

<div class="container">
    
    <div id="quiz-page">
        <header>
            <h1>ğŸ©º å€‹äººåŒ–ç‡Ÿé¤Šè¨ºæ–·</h1>
            <p class="subtitle">30ç§’æ‰¾å‡ºæ‚¨ç¾åœ¨çœŸæ­£éœ€è¦çš„ç‡Ÿé¤Šç´ </p>
        </header>

        <div class="content-box">
            <div class="question-block">
                <label class="q-title">1. æ‚¨çš„æ€§åˆ¥</label>
                <div class="option-grid">
                    <label class="option-btn">
                        <input type="radio" name="gender" value="female" checked>
                        <span>å¥³æ€§ ğŸ‘©ğŸ»</span>
                    </label>
                    <label class="option-btn">
                        <input type="radio" name="gender" value="male">
                        <span>ç”·æ€§ ğŸ‘¦ğŸ»</span>
                    </label>
                </div>
            </div>

            <div class="question-block">
                <label class="q-title">2. æ‚¨çš„å¹´é½¡å±¤</label>
                <select id="age">
                    <option value="15-25">15 - 25 æ­² (å­¸ç”Ÿ/ç™¼è‚²æœŸ)</option>
                    <option value="26-40" selected>26 - 40 æ­² (è·å ´/è¼•ç†Ÿé½¡)</option>
                    <option value="41-55">41 - 55 æ­² (ç†Ÿé½¡/æ›´å¹´æœŸ)</option>
                    <option value="56+">56 æ­²ä»¥ä¸Š (éŠ€é«®ä¿é¤Š)</option>
                </select>
            </div>

            <div class="question-block">
                <label class="q-title">3. æ‚¨æœ€è¿‘çš„å›°æ“¾æˆ–ç‹€æ…‹ (å¯è¤‡é¸)</label>
                <div class="option-grid" style="margin-bottom:15px;">
                     <label class="option-btn special-option">
                        <input type="checkbox" value="pregnancy">
                        <span style="color:#C0392B;">ğŸ¤±ğŸ» å­•æœŸ/å“ºä¹³åª½å’ª</span>
                    </label>
                    <label class="option-btn special-option">
                        <input type="checkbox" value="vegetarian">
                        <span style="color:#1E8449;">ğŸ¥¬ ç´ é£Ÿè€…</span>
                    </label>
                </div>
                <div class="option-grid" id="symptoms-container">
                    </div>
            </div>

            <button class="btn-submit" onclick="showResults()">æŸ¥çœ‹å®Œæ•´è¨ºæ–·å ±å‘Š ğŸ‘‰</button>
        </div>
    </div>

    <div id="result-page">
        <div class="result-header">
            <h2 style="color:var(--primary-dark); margin:0;">ğŸ“‹ æ‚¨çš„å°ˆå±¬è™•æ–¹ç±¤</h2>
            <p style="color:#666; font-size:0.9rem;">ä»¥ä¸‹æ˜¯ç‚ºæ‚¨é‡èº«æ‰“é€ çš„æœç”¨æ™‚é–“è¡¨èˆ‡æˆåˆ†è§£æ</p>
        </div>

        <div id="alert-section"></div>

        <div id="schedule-list"></div>

        <div class="brand-section">
            <h3 style="color:var(--primary-dark); margin-top:0;">ğŸ† åœ˜è³¼é¸è³¼æŒ‡å—</h3>
            <p style="font-size:0.9rem; color:#666; margin-bottom:20px;">
                é‡å°æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘å€‘ç¯©é¸å‡ºæœ¬æ¬¡åœ˜è³¼é©åˆæ‚¨çš„ç”¢å“ï¼š
            </p>
            <div id="wb-list"></div>
        </div>

        <div class="buy-container">
            <div class="buy-info">
                <span class="buy-date">ğŸ“… ç¶­è£œç›Šåœ˜è³¼ï¼š12/27 - 1/3 é™å®š</span>
                <span class="ship-date">ğŸšš é è¨ˆ 2026/01/02 é–‹å§‹å‡ºè²¨</span>
            </div>
            <a href="https://www.likepets-official.com/one-page-stores/Leona2512" target="_blank" class="btn-buy">
                ç«‹å³å‰å¾€è³£å ´ä¸‹å–® ğŸ›’
            </a>
        </div>
        
        <button class="btn-reset" onclick="resetQuiz()">é‡æ–°æ¸¬é©—</button>
    </div>

</div>

<script>
    // --- 1. è³‡æ–™åº«è¨­å®š ---

    // å›°æ“¾é¸é …
    const symptoms = [
        { id: 'fatigue', label: 'å®¹æ˜“ç–²ç´¯ ğŸª«' },
        { id: 'pale', label: 'æ°£è‰²ä¸ä½³ ğŸ«¥' },
        { id: 'dull_skin', label: 'çš®è†šæš—æ²‰è Ÿé»ƒ ğŸŒ' },
        { id: 'dry_skin', label: 'è‚Œè†šä¹¾ç‡¥/ç´°ç´‹ ğŸª¾' },
        { id: 'sleep', label: 'ç¡çœ å“è³ªå·® ğŸ’¤' },
        { id: 'period_pain', label: 'ç¶“æœŸä¸é©/æ‚¶ç—› ğŸ©¸' },
        { id: 'pms', label: 'ç¶“å‰æ˜“æ€’/èƒ¸æ¼² ğŸ¤¬' },
        { id: 'cold', label: 'æ‰‹è…³å†°å†· â„ï¸' },
        { id: 'constipation', label: 'æ’ä¾¿ä¸é † ğŸ’©' },
        { id: 'mood', label: 'æƒ…ç·’ä½è½/æ˜“æ€’ ğŸ”¥' },
        { id: 'oily_skin', label: 'çš®è„‚åˆ†æ³Œæ—ºç›› ğ«Ÿ' },
        { id: 'acne', label: 'å®¹æ˜“é•·ç—˜ç—˜ ğŸŒ‹' },
        { id: 'hair_loss', label: 'è½é«®/é«®é‡å°‘ ğŸ§‘ğŸ»â€ğŸ¦²' },
        { id: 'eyes', label: 'é«˜åº¦ç”¨çœ¼è€… ğŸ‘ï¸' },
        { id: 'workout', label: 'æœ‰é‹å‹•ç¿’æ…£/é—œç¯€ä¿é¤Š ğŸ‹ğŸ»' },
        { id: 'weight_loss', label: 'æ¸›é‡æ—ç¾¤ ğŸ’ªğŸ»' },
        { id: 'alcohol', label: 'æ‡‰é…¬/é£²é…’éœ€æ±‚ ğŸº' },
        { id: 'private_part', label: 'ç§å¯†è™•å›°æ“¾ ğŸ’—' },
        { id: 'bad_breath', label: 'å£è…”æ°£å‘³é‡ ğŸ‘„' }
    ];

    // æˆåˆ†è©³ç´°åŠŸæ•ˆ
    const ingredientInfo = {
        'Bç¾¤': 'å«è‘‰é…¸èˆ‡B12ï¼Œå¯¶å¯¶ç™¼è‚²èˆ‡åª½å’ªæç¥é—œéµ',
        'ç¶­ä»–å‘½C': 'æŠ—æ°§åŒ–ï¼Œä¿ƒé€²è† åŸåˆæˆèˆ‡éµè³ªå¸æ”¶',
        'éµ': 'è£œè¡€æ°£ï¼Œæä¾›å¯¶å¯¶èˆ‡åª½å’ªé€ è¡€åŸæ–™',
        'è† åŸè›‹ç™½': 'ç¾é¡èˆ‡é—œéµéˆæ´»é›™æ•ˆä¿é¤Š',
        'ç›Šç”ŸèŒ': 'å»ºç«‹å¯¶å¯¶å…ç–«åŸºç¤ï¼Œæ”¹å–„åª½å’ªä¾¿ç§˜',
        'è–‘é»ƒ': 'åŠ å¼·ä»£è¬ (âš ï¸å­•æœŸè«‹é¿é–‹ï¼Œç”¢å¾Œå¯é©é‡)',
        'è‘‰é»ƒç´ ': 'éæ¿¾è—å…‰ï¼Œä¿è­·åª½å’ªè¦–åŠ›',
        'ç”Ÿç‰©ç´ ': 'ç”¢å¾Œè½é«®æ•‘æ˜Ÿ',
        'éˆ£': 'ä¸€äººåƒå…©äººè£œï¼Œé é˜²æŠ½ç­‹èˆ‡éª¨è³ªæµå¤±',
        'é‚': 'å¤©ç„¶æ”¾é¬†åŠ‘ï¼Œæ”¹å–„ç¡çœ èˆ‡è‚Œè‚‰ç·Šç¹ƒ',
        'é­šæ²¹': 'è£œå……DHAå¹«åŠ©å¯¶å¯¶è…¦éƒ¨ç™¼è‚²',
        'é‹…': 'ä¿®å¾©é»è†œï¼Œç”¢å¾Œå‚·å£ç™’åˆ',
        'Q10': 'å¿ƒè‡Ÿå‹•åŠ› (âš ï¸å­•æœŸ/å“ºä¹³æš«åœ)',
        'è‚Œé…¸': 'è‚Œè‚‰çˆ†ç™¼åŠ› (âš ï¸å­•æœŸ/å“ºä¹³æš«åœ)',
        'è›‹ç™½è³ª': 'ä¿®å¾©çµ„ç¹”ï¼Œä¹³æ±åˆ†æ³ŒåŸæ–™',
        'GABA': 'æŠ‘åˆ¶ç¥ç¶“èˆˆå¥®ï¼ŒåŠ©çœ ',
        'ç©€èƒ±ç”˜è‚½': 'ç¾ç™½ (âš ï¸å­•æœŸ/å“ºä¹³æš«åœ)'
    };

    // æ™‚é–“æ®µçµ„åˆèªªæ˜
    const timeSlotSynergy = {
        'èµ·åºŠç©ºè…¹': {
            title: 'â˜€ï¸ é–‹å•Ÿå¸æ”¶çš„é»ƒé‡‘æœŸ',
            desc: `
                ç©ºè…¹æ™‚è† åŸè›‹ç™½èˆ‡éµ(æ­é…C)å¸æ”¶ç‡æœ€ä½³ã€‚<br>
                <div style="margin-top:5px; font-size:0.85em; color:#D35400;">
                    âš ï¸ è‹¥èƒƒæ•æ„Ÿæˆ–æ‡·å­•åèƒƒï¼Œè«‹æ”¹ç‚ºã€Œéš¨é¤ã€æˆ–ã€Œé¤å¾Œã€åƒã€‚
                </div>
            `
        },
        'æ—©é¤å¾Œ': {
            title: 'ğŸš€ å•Ÿå‹•ä¸€æ—¥èƒ½é‡',
            desc: 'Bç¾¤å¹«åŠ©èƒ½é‡ä»£è¬ã€‚è‘‰é»ƒç´ ç‚ºè„‚æº¶æ€§ï¼Œéœ€æ­é…æ—©é¤æ²¹è„‚å¸æ”¶ã€‚'
        },
        'åˆé¤å¾Œ': {
            title: 'ğŸ›¡ï¸ å¼·åŒ–é˜²è­·',
            desc: 'éˆ£ç‰‡ç§»è‡³åˆé¤ä»¥é¿é–‹æ—©é¤çš„éµåŠ‘ã€‚é­šæ²¹éš¨é¤åƒå¸æ”¶æœ€å¥½ã€‚'
        },
        'é‹å‹•å‰å¾Œ': {
            title: 'ğŸ’ª ä¿®å¾©é»ƒé‡‘çª—',
            desc: 'è›‹ç™½è³ªå³æ™‚å›è£œè‚Œè‚‰èˆ‡é«”åŠ›æè€—ã€‚'
        },
        'ç¡å‰': {
            title: 'ğŸŒ™ æ”¾é¬†èˆ‡ä¿®å¾©',
            desc: 'é‚å¹«åŠ©ç¥ç¶“æ”¾é¬†ã€‚ç›Šç”ŸèŒç¡å‰ç©ºè…¹åƒï¼Œå®šæ®–æ•ˆæœä½³ã€‚'
        }
    };

    // ç—‡ç‹€å°æ‡‰è¦å‰‡ (åŠ å…¥è† åŸè›‹ç™½é‚è¼¯)
    const rules = {
        'pregnancy': ['Bç¾¤', 'éµ', 'éˆ£', 'é­šæ²¹', 'ç›Šç”ŸèŒ', 'ç¶­ä»–å‘½C'], 
        'vegetarian': ['Bç¾¤', 'éµ', 'é‹…', 'éˆ£'],
        'fatigue': ['Bç¾¤', 'éµ', 'Q10'],
        'pale': ['éµ', 'ç¶­ä»–å‘½C', 'Bç¾¤', 'è† åŸè›‹ç™½'],
        'dull_skin': ['ç©€èƒ±ç”˜è‚½', 'ç¶­ä»–å‘½C', 'è† åŸè›‹ç™½'],
        'dry_skin': ['é­šæ²¹', 'è† åŸè›‹ç™½', 'ç¶­ä»–å‘½C'], // è† åŸä¸»æˆ°å ´
        'sleep': ['é‚', 'GABA'],
        'period_pain': ['éˆ£', 'é‚', 'é­šæ²¹'],
        'pms': ['éˆ£', 'é‚', 'Bç¾¤'],
        'cold': ['éµ', 'è–‘é»ƒ'],
        'constipation': ['é‚', 'ç›Šç”ŸèŒ'],
        'mood': ['éˆ£', 'é‚', 'Bç¾¤', 'é­šæ²¹'],
        'oily_skin': ['é‹…', 'Bç¾¤'],
        'acne': ['é‹…', 'é­šæ²¹', 'ç›Šç”ŸèŒ'],
        'hair_loss': ['éµ', 'é‹…', 'ç”Ÿç‰©ç´ '],
        'eyes': ['è‘‰é»ƒç´ ', 'é­šæ²¹'],
        'workout': ['è‚Œé…¸', 'Bç¾¤', 'é­šæ²¹', 'è† åŸè›‹ç™½'], // è† åŸè­·é—œç¯€
        'weight_loss': ['Bç¾¤', 'è›‹ç™½è³ª', 'ç›Šç”ŸèŒ'],
        'alcohol': ['Bç¾¤', 'è–‘é»ƒ'],
        'private_part': ['ç›Šç”ŸèŒ'],
        'bad_breath': ['ç›Šç”ŸèŒ', 'é‹…']
    };

    // â›”ï¸ ç¦å¿Œè¦å‰‡
    const contraindications = {
        'pregnancy': ['Q10', 'ç©€èƒ±ç”˜è‚½', 'è‚Œé…¸', 'è–‘é»ƒ', 'Aé†‡'],
        'vegetarian': ['é­šæ²¹', 'è† åŸè›‹ç™½'] 
    };

    // ç”¢å“è³‡æ–™ (åŒ…å«ç¶­è£œç›Š & ä¸€ä¸¸è† åŸ)
    const wbData = {
        // ç¶­è£œç›Šç³»åˆ—
        'Bç¾¤': { name: 'å¤©ç„¶é…µæ¯Bç¾¤', desc: 'æ—©é¤å¾Œ 2 é¡†ï½œå«è‘‰é…¸ï¼Œå¤©ç„¶æç¥' },
        'ç¶­ä»–å‘½C': { name: 'è¥¿å°åº¦æ«»æ¡ƒC', desc: 'æ—©é¤å¾Œæˆ–ç©ºè…¹ 2 é¡†ï½œ7å€å¸æ”¶åŠ›åŠ©è† åŸåˆæˆ' },
        'éˆ£': { name: 'æµ·è—»éˆ£', desc: 'åˆé¤å¾Œ 2 é¡†ï½œç´ é£Ÿå¯é£Ÿï¼Œé«˜å¸æ”¶ç‡' },
        'é‚': { name: 'å¤©ç„¶é…µæ¯é‚', desc: 'ç¡å‰ 1-2 é¡†ï½œå¹«åŠ©å…¥ç¡ï¼Œé é˜²æŠ½ç­‹' },
        'é‹…': { name: 'å¤©ç„¶é…µæ¯é‹…', desc: 'åˆæ™šé¤å¾Œ 1 é¡†ï½œå¢å¼·ä¿è­·åŠ›' },
        'è–‘é»ƒ': { name: 'è–‘é»ƒ', desc: 'é¤å¾Œ 2 é¡†ï½œåŠ å¼·ä»£è¬ (å­•æœŸæš«åœ)' },
        'éµ': { name: 'é…µæ¯éµ', desc: 'æ—©ä¸Šç©ºè…¹ 1 é¡†ï½œæº«å’Œä¸ä¾¿ç§˜ï¼Œæ°£è‰²æ•‘æ˜Ÿ' },
        
        // ğŸŒŸ é‡ç£…æ–°å“ï¼šè† åŸè›‹ç™½ (ç¨ç«‹æ¨™è¨˜ isFuture)
        'è† åŸè›‹ç™½': { 
            name: 'ä¸€ä¸¸è† åŸè›‹ç™½ (ç’¦ç ”å¸)', 
            desc: 'æ—©èµ·ç©ºè…¹ 1 åŒ…ï½œæ—¥æœ¬ç™¾å¹´è£½è—¥ç´šãƒ»ç¾é¡è­·é—œç¯€é›™æ•ˆ (1000Da)',
            isFuture: true 
        }
    };

    // --- åˆå§‹åŒ– ---
    const container = document.getElementById('symptoms-container');
    symptoms.forEach(item => {
        container.innerHTML += `
            <label class="option-btn">
                <input type="checkbox" value="${item.id}">
                <span>${item.label}</span>
            </label>
        `;
    });

    function showResults() {
        // å–å¾—è¼¸å…¥
        const gender = document.querySelector('input[name="gender"]:checked').value;
        const age = document.getElementById('age').value;
        
        const allCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        const checkedValues = Array.from(allCheckboxes).map(cb => cb.value);
        
        const isPregnant = checkedValues.includes('pregnancy');
        const isVeg = checkedValues.includes('vegetarian');

        let needs = new Set(['Bç¾¤']); // æ‰€æœ‰äººåŸºç¤

        // 1. æ€§åˆ¥è¦å‰‡
        if (gender === 'female') {
            if (['15-25', '26-40'].includes(age)) { needs.add('éµ'); needs.add('ç¶­ä»–å‘½C'); }
            else { needs.add('éˆ£'); needs.add('é­šæ²¹'); }
        } else {
            needs.add('é‹…');
            if (['41-55', '56+'].includes(age)) needs.add('é­šæ²¹');
        }

        // 2. ç—‡ç‹€ç–ŠåŠ 
        checkedValues.forEach(s => {
            if(rules[s]) rules[s].forEach(n => needs.add(n));
            if(s === 'fatigue' && gender === 'female') needs.add('éµ');
        });

        // 3. ç¦å¿Œéæ¿¾
        if (isPregnant) {
            contraindications['pregnancy'].forEach(banned => needs.delete(banned));
        }
        if (isVeg) {
            contraindications['vegetarian'].forEach(banned => needs.delete(banned));
        }

        const finalNeeds = Array.from(needs);
        
        renderAlerts(isPregnant, isVeg);
        renderSchedule(finalNeeds);
        renderWb(finalNeeds);

        document.getElementById('quiz-page').style.display = 'none';
        document.getElementById('result-page').style.display = 'block';
        window.scrollTo(0,0);
    }

    function renderAlerts(isMom, isVeg) {
        const alertSection = document.getElementById('alert-section');
        alertSection.innerHTML = '';

        if (isMom) {
            alertSection.innerHTML += `
                <div class="alert-box mom">
                    <span style="font-size:1.5rem; margin-right:10px;">ğŸ¤°</span>
                    <div>
                        <strong>å­•åª½å’ª/å“ºä¹³å°ˆå±¬æé†’ï¼š</strong><br>
                        1. ç³»çµ±å·²ç§»é™¤ <b>Q10ã€ç©€èƒ±ç”˜è‚½ã€è–‘é»ƒ</b> ç­‰æš«ä¸å»ºè­°æˆåˆ†ã€‚<br>
                        2. <b>é­šæ²¹</b>å»ºè­°åœ¨é ç”¢æœŸå‰ 2 é€±æš«åœé£Ÿç”¨ã€‚<br>
                        3. <b>ç¶­è£œç›Šæµ·è—»éˆ£èˆ‡é…µæ¯Bç¾¤</b> éå¸¸é©åˆå­•æœŸè£œå……ã€‚
                    </div>
                </div>
            `;
        }
        
        if (isVeg) {
            alertSection.innerHTML += `
                <div class="alert-box normal">
                    <span style="font-size:1.5rem; margin-right:10px;">ğŸ¥¬</span>
                    <div>
                        <strong>ç´ é£Ÿè€…ç‡Ÿé¤Šç­†è¨˜ï¼š</strong><br>
                        1. å·²åŠ å¼· <b>B12 (Bç¾¤) èˆ‡ éµ</b> å»ºè­°ã€‚<br>
                        2. ç³»çµ±ç§»é™¤äº†é­šæ²¹èˆ‡è† åŸè›‹ç™½ (å‹•ç‰©æ€§)ã€‚
                    </div>
                </div>
            `;
        }
    }

    function renderSchedule(list) {
        const timeMap = {
            'èµ·åºŠç©ºè…¹': ['è† åŸè›‹ç™½', 'ç¶­ä»–å‘½C', 'éµ', 'ç›Šç”ŸèŒ'],
            'æ—©é¤å¾Œ': ['Bç¾¤', 'è–‘é»ƒ', 'è‘‰é»ƒç´ ', 'ç”Ÿç‰©ç´ '],
            'åˆé¤å¾Œ': ['éˆ£', 'é­šæ²¹', 'é‹…', 'Q10'],
            'é‹å‹•å‰å¾Œ': ['è‚Œé…¸', 'è›‹ç™½è³ª'],
            'ç¡å‰': ['é‚', 'GABA', 'ç©€èƒ±ç”˜è‚½']
        };

        let html = '';
        
        for (let [time, items] of Object.entries(timeMap)) {
            const userItems = items.filter(i => list.includes(i));
            
            if (userItems.length > 0) {
                let itemsHtml = userItems.map(item => `
                    <div class="supplement-item">
                        <div class="supp-name">â— ${item}</div>
                        <div class="supp-desc">${ingredientInfo[item] || ''}</div>
                    </div>
                `).join('');

                let synergyHtml = '';
                if (timeSlotSynergy[time]) {
                    synergyHtml = `
                        <div class="synergy-box">
                            <span class="synergy-title">ğŸ’¡ ç‚ºä»€éº¼é€™æ™‚å€™ä¸€èµ·åƒï¼Ÿ</span>
                            ${timeSlotSynergy[time].desc}
                        </div>
                    `;
                }

                html += `
                    <div class="schedule-card">
                        <div class="time-header">
                            <span>${time}</span>
                            <span style="font-size:0.8rem; background:rgba(255,255,255,0.2); padding:2px 8px; border-radius:10px;">${userItems.length} é …</span>
                        </div>
                        ${synergyHtml}
                        <div class="item-list">
                            ${itemsHtml}
                        </div>
                    </div>
                `;
            }
        }
        document.getElementById('schedule-list').innerHTML = html || '<p style="text-align:center; padding:20px;">æ­å–œæ‚¨ï¼ç›®å‰ç‹€æ…‹è‰¯å¥½ï¼Œç¶­æŒåŸºç¤å‡è¡¡é£²é£Ÿå³å¯ã€‚</p>';
    }

    function renderWb(list) {
        let html = '';
        let hasItem = false;
        
        // åˆ†é›¢ç¾åœ¨å¯è²· èˆ‡ æœªä¾†ç”¢å“
        const currentItems = list.filter(item => wbData[item] && !wbData[item].isFuture);
        const futureItems = list.filter(item => wbData[item] && wbData[item].isFuture);

        // æ¸²æŸ“ç¶­è£œç›Šç¾è²¨
        currentItems.forEach(item => {
            hasItem = true;
            html += `
                <div class="wb-card">
                    <div style="font-weight:bold; color:#1F4E79; font-size:1.1rem; margin-bottom:5px;">
                        âœ… ${wbData[item].name}
                    </div>
                    <div style="font-size:0.95rem; color:#444;">
                        ${wbData[item].desc}
                    </div>
                </div>
            `;
        });

        // æ¸²æŸ“è† åŸè›‹ç™½ (å¦‚æœæœ‰è¢«é¸ä¸­)
        futureItems.forEach(item => {
            hasItem = true;
            html += `
                <div class="wb-card future-product">
                    <span class="badge-future">1/27 é–‹åœ˜ ğŸ”¥</span>
                    <div style="font-weight:bold; color:#9A7D0A; font-size:1.1rem; margin-bottom:5px;">
                        ğŸ‘‘ ${wbData[item].name}
                    </div>
                    <div style="font-size:0.9rem; color:#7D6608; line-height:1.5;">
                        <b>SK-IIå¾¡ç”¨å» åŸæ–™ãƒ»1000Daæ¥µå°åˆ†å­</b><br>
                        å«é®­é­šé¼»è»Ÿéª¨(è­·é—œç¯€)+7å€å¸æ”¶å¾®è„‚å›ŠCã€‚<br>
                        ${wbData[item].desc}
                    </div>
                </div>
            `;
        });
        
        document.getElementById('wb-list').innerHTML = hasItem ? html : '<p>ç›®å‰æ¸…å–®ä¸­æš«ç„¡å°æ‡‰çš„ç¶­è£œç›Šç”¢å“</p>';
    }

    function resetQuiz() {
        document.getElementById('quiz-page').style.display = 'block';
        document.getElementById('result-page').style.display = 'none';
        window.scrollTo(0,0);
    }
</script>

</body>
</html>
